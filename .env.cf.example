# ==============================================
# Cloudflare Pages 环境变量配置
# 在 CF Pages 控制台中设置这些环境变量
# ==============================================

# ==============================================
# 基础配置
# ==============================================
NODE_ENV=production
CF_PAGES=true

# ==============================================
# Strapi API 连接配置 - 重要！构建时需要连接VPS
# ==============================================
# 您的VPS Strapi地址（构建时Cloudflare需要访问这个地址获取内容）
STRAPI_URL=https://api.sparkdone.com
STRAPI_PUBLIC_URL=https://api.sparkdone.com

# Strapi API Token (在Strapi管理面板生成 - 必需！)
# 权限类型：Read-only
STRAPI_API_TOKEN=your_actual_strapi_api_token_here

# ==============================================
# 功能开关
# ==============================================
USE_STRAPI=true
USE_HYBRID_MODE=false

# ==============================================
# 🚀 Cloudflare Pages 部署步骤
# ==============================================

# 1. 在 Cloudflare Pages 项目设置 > 环境变量 中添加以上所有变量
# 2. 确保您的VPS Strapi正在运行并可通过 https://api.sparkdone.com 访问
# 3. 在 Strapi 管理面板中生成 API Token：
#    - 进入 Settings > API Tokens > Create new API Token
#    - 名称：Cloudflare Pages Build
#    - 类型：Read-only
#    - 复制生成的Token到 STRAPI_API_TOKEN
# 4. 确保 VPS 防火墙开放 80 和 443 端口
# 5. 确保域名 api.sparkdone.com 正确解析到您的VPS IP

# ==============================================
# 🔧 Cloudflare Pages 构建配置
# ==============================================
# Framework preset: Astro
# Build command: cd astro && pnpm install && pnpm build:cf
# Output directory: astro/dist/client
# Root directory: / (项目根目录)
# Node.js version: 18.x 或 20.x

# ==============================================
# ⚠️ 重要提醒
# ==============================================
# - STRAPI_API_TOKEN 是必需的，否则构建时无法获取内容
# - 构建过程中 Cloudflare 会连接您的 VPS 获取 Strapi 数据
# - 确保 VPS 在构建时可以被 Cloudflare 访问
