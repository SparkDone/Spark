---
import BackToTop from "@components/control/BackToTop.astro";
import Footer from "@components/Footer.astro";
import Navbar from "@components/Navbar.astro";
import SideBar from "@components/widget/SideBar.astro";
import type { MarkdownHeading } from "astro";
import { Icon } from "astro-icon/components";

import { siteConfig } from "../config";
// Bannerå¸¸é‡å¯¼å…¥å·²åˆ é™¤
// import {
//	BANNER_HEIGHT,
//	BANNER_HEIGHT_EXTEND,
//	MAIN_PANEL_OVERLAPS_BANNER_HEIGHT,
// } from "../constants/constants";
import Layout from "./Layout.astro";
// import type { BannerData } from "../utils/banner-utils"; // Bannerå·²åˆ é™¤

interface Props {
	title?: string;
	// banner?: BannerData | null; // Bannerå·²åˆ é™¤
	description?: string;
	lang?: string;
	setOGTypeArticle?: boolean;
	headings?: MarkdownHeading[];
	author?: string;
}

const {
	title,
	description,
	lang,
	setOGTypeArticle,
	headings = [],
	author,
} = Astro.props;

// åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºBanner - å·²åˆ é™¤
// const showBanner = banner && banner.src;
// const hasBannerCredit = showBanner && banner.creditText;
// const hasBannerLink = showBanner && banner.creditUrl;

const mainPanelTop = "5.5rem"; // å›ºå®šé«˜åº¦ï¼Œä¸å†ä¾èµ–Banner
---

<Layout title={title} description={description} lang={lang} setOGTypeArticle={setOGTypeArticle} author={author}>

<!-- Navbar -->
<slot slot="head" name="head"></slot>
<div id="top-row" class="z-50 pointer-events-none fixed top-0 left-0 right-0 transition-all duration-700 w-full" class:list={[""]}>
    <div id="navbar-wrapper" class="pointer-events-auto transition-all">
        <Navbar></Navbar>
    </div>
</div>

<!-- Bannerå·²åˆ é™¤ -->

<!-- Fixed Left Sidebar - åœ¨å¤§å±å¹•ä¸Šæ˜¾ç¤ºï¼Œå°å±å¹•ä¸Šéšè— -->
<div id="sidebar-desktop" class="sidebar-hidden fixed left-0 z-40 w-[280px] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-r border-gray-200/20 dark:border-gray-700/20 overflow-y-auto sidebar-scroll" style={`top: 4.5rem; bottom: 0; height: calc(100vh - 4.5rem); padding-bottom: 20px; pointer-events: auto; user-select: text;`}>
    <SideBar class="onload-animation" headings={headings}></SideBar>
</div>

<!-- Mobile Sidebar Overlay - ç§»åŠ¨ç«¯æŠ½å±‰å¼ä¾§è¾¹æ  -->
<div id="sidebar-overlay" class="fixed inset-0 z-40 opacity-0 pointer-events-none transition-opacity duration-300 bg-black/50">
    <div id="sidebar-mobile" class="fixed left-0 top-0 z-50 w-[280px] bg-white dark:bg-gray-900 transform -translate-x-full transition-transform duration-300 overflow-y-auto sidebar-scroll" style={`padding-top: 4.5rem; height: 100vh; padding-bottom: 20px; user-select: text;`}>
        <SideBar class="onload-animation" headings={headings}></SideBar>
    </div>
</div>

<!-- Mobile Sidebar Toggle Button - ç§»åŠ¨ç«¯ä¾§è¾¹æ åˆ‡æ¢æŒ‰é’® -->
<button id="mobile-sidebar-toggle" class="hidden fixed left-4 z-30 w-12 h-12 bg-white dark:bg-gray-900 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors shadow-lg" style="top: 5.5rem;">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
</button>

<!-- Main content - åœ¨å¤§å±å¹•ä¸Šæ·»åŠ å·¦è¾¹è·ï¼Œå°å±å¹•ä¸Šå…¨å®½ -->
<div class="w-full z-20 pt-[4.5rem]">
    <!-- ç§»é™¤pointer-events-noneï¼Œé¿å…å½±å“å…¶ä»–å…ƒç´  -->
    <div class="relative w-full">
        <div id="main-grid" class="transition duration-700">
            <!-- Banner image credit å·²åˆ é™¤ -->

            <main id="swup-container" class="transition-swup-fade w-full">
                <div id="content-wrapper" class="onload-animation">
                    <!-- the overflow-hidden here prevent long text break the layout-->
                    <!-- make id different from windows.swup global property -->
                    <slot></slot>
                </div>
            </main>

            <!-- Footeråœ¨ä¸»å†…å®¹åŒºåŸŸå†… -->
            <div class="footer-content onload-animation">
                <Footer></Footer>
            </div>
        </div>

        <BackToTop></BackToTop>
    </div>
</div>

</Layout>
<!-- Bannerè„šæœ¬å·²åˆ é™¤ -->
<script>


</script>

<!-- Banner CSSæ ·å¼å·²åˆ é™¤ -->

<script>


    // é¦–é¡µBannerå‡½æ•°å·²åˆ é™¤

    // åˆ†ç±»Bannerå‡½æ•°å·²åˆ é™¤

    // æ‰€æœ‰Bannerç›¸å…³å‡½æ•°å·²åˆ é™¤
</script>



<script>
// æ™ºèƒ½ä¾§è¾¹æ æ§åˆ¶ç³»ç»Ÿ
document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.getElementById('mobile-sidebar-toggle');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const sidebarMobile = document.getElementById('sidebar-mobile');
    const sidebarDesktop = document.getElementById('sidebar-desktop');

    if (!mobileToggle || !sidebarOverlay || !sidebarMobile || !sidebarDesktop) return;

    // æ™ºèƒ½æŠ˜å çŠ¶æ€ï¼šæ ¹æ®çª—å£å®½åº¦åˆå§‹åŒ–
    const currentWidth = window.innerWidth;
    window.isAutoCollapsed = currentWidth < 1500;
    window.wasInSmartMode = currentWidth >= 1200 && currentWidth < 1500;
    console.log('ğŸ¯ åˆå§‹åŒ–æ™ºèƒ½ä¾§è¾¹æ ç³»ç»Ÿï¼Œçª—å£å®½åº¦:', currentWidth, 'æŠ˜å çŠ¶æ€:', window.isAutoCollapsed);

    // æ‰“å¼€ä¾§è¾¹æ 
    function openSidebar() {
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') console.log('ğŸ“‚ æ‰§è¡Œæ‰“å¼€ä¾§è¾¹æ ');
        sidebarOverlay.classList.remove('opacity-0', 'pointer-events-none');
        sidebarOverlay.classList.add('opacity-100');
        sidebarMobile.classList.remove('-translate-x-full');
        document.body.style.overflow = 'hidden';
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') console.log('âœ… ä¾§è¾¹æ å·²æ‰“å¼€');
    }

    // å…³é—­ä¾§è¾¹æ 
    function closeSidebar() {
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') console.log('ğŸ“ æ‰§è¡Œå…³é—­ä¾§è¾¹æ ');
        sidebarOverlay.classList.add('opacity-0', 'pointer-events-none');
        sidebarOverlay.classList.remove('opacity-100');
        sidebarMobile.classList.add('-translate-x-full');
        document.body.style.overflow = '';
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') console.log('âœ… ä¾§è¾¹æ å·²å…³é—­');
    }

    // æŠ˜å æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    mobileToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        const currentWidth = window.innerWidth;

        console.log('ğŸ”˜ æŠ˜å æŒ‰é’®è¢«ç‚¹å‡»ï¼Œçª—å£å®½åº¦:', currentWidth);

        if (currentWidth >= 1200 && currentWidth < 1500) {
            // 1200-1500pxï¼šæ™ºèƒ½æŠ˜å æ¨¡å¼
            if (window.isAutoCollapsed) {
                // å½“å‰æ˜¯æŠ˜å çŠ¶æ€ï¼Œç‚¹å‡»å±•å¼€
                window.isAutoCollapsed = false;
                sidebarDesktop.classList.remove('sidebar-hidden');
                sidebarDesktop.classList.add('sidebar-visible');
                // ç§»é™¤ä»»ä½•å†…è”æ ·å¼ï¼Œè®©CSSç±»ç”Ÿæ•ˆ
                sidebarDesktop.style.removeProperty('display');
                mobileToggle.style.display = 'none'; // éšè—æŒ‰é’®ï¼Œå› ä¸ºä¾§è¾¹æ z-indexæ›´é«˜
                console.log('ğŸ”“ æ™ºèƒ½å±•å¼€ä¾§è¾¹æ ');
            }
        } else if (currentWidth < 1200) {
            // ç§»åŠ¨ç«¯ï¼šåŸæœ‰é€»è¾‘
            console.log('ğŸ“± ç§»åŠ¨ç«¯æ¨¡å¼');
            if (sidebarOverlay.classList.contains('opacity-0')) {
                console.log('ğŸ”“ æ‰“å¼€ç§»åŠ¨ç«¯ä¾§è¾¹æ ');
                openSidebar();
            } else {
                console.log('ğŸ”’ å…³é—­ç§»åŠ¨ç«¯ä¾§è¾¹æ ');
                closeSidebar();
            }
        }
    });

    // ç‚¹å‡»ç©ºç™½åŒºåŸŸè‡ªåŠ¨æŠ˜å ä¾§è¾¹æ 
    document.addEventListener('click', function(e) {
        const currentWidth = window.innerWidth;

        if (currentWidth >= 1200 && currentWidth < 1500 && !window.isAutoCollapsed) {
            // æ£€æŸ¥ç‚¹å‡»çš„æ˜¯å¦æ˜¯ä¾§è¾¹æ æˆ–å…¶å­å…ƒç´ 
            if (!sidebarDesktop.contains(e.target) && !mobileToggle.contains(e.target)) {
                console.log('ğŸ”’ ç‚¹å‡»ç©ºç™½åŒºåŸŸï¼Œè‡ªåŠ¨æŠ˜å ä¾§è¾¹æ ');
                window.isAutoCollapsed = true;
                sidebarDesktop.classList.remove('sidebar-visible');
                sidebarDesktop.classList.add('sidebar-hidden');
                sidebarDesktop.style.removeProperty('display');
                mobileToggle.style.display = 'flex'; // æ˜¾ç¤ºæŠ˜å æŒ‰é’®
            }
        }
    });

    // ç‚¹å‡»ä¾§è¾¹æ å†…çš„é“¾æ¥åè‡ªåŠ¨æŠ˜å 
    sidebarDesktop.addEventListener('click', function(e) {
        const currentWidth = window.innerWidth;

        if (currentWidth >= 1200 && currentWidth < 1500 && !window.isAutoCollapsed) {
            // æ£€æŸ¥ç‚¹å‡»çš„æ˜¯å¦æ˜¯é“¾æ¥
            if (e.target.tagName === 'A' || e.target.closest('a')) {
                console.log('ğŸ”— ç‚¹å‡»ä¾§è¾¹æ é“¾æ¥ï¼Œè‡ªåŠ¨æŠ˜å ');
                setTimeout(() => {
                    window.isAutoCollapsed = true;
                    sidebarDesktop.classList.remove('sidebar-visible');
                    sidebarDesktop.classList.add('sidebar-hidden');
                    sidebarDesktop.style.removeProperty('display');
                    mobileToggle.style.display = 'flex';
                }, 100); // å»¶è¿Ÿä¸€ç‚¹è®©å¯¼èˆªå…ˆæ‰§è¡Œ
            }
        }
    });

    // ç‚¹å‡»é®ç½©å±‚å…³é—­ä¾§è¾¹æ 
    sidebarOverlay.addEventListener('click', function(e) {
        if (e.target === sidebarOverlay) {
            closeSidebar();
        }
    });

    // ESCé”®å…³é—­ä¾§è¾¹æ 
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && !sidebarOverlay.classList.contains('opacity-0')) {
            closeSidebar();
        }
    });

    // åŠ¨æ€æ§åˆ¶ä¾§è¾¹æ æ˜¾ç¤º
    function updateSidebarDisplay() {
        const sidebarDesktop = document.getElementById('sidebar-desktop');
        const mobileToggle = document.getElementById('mobile-sidebar-toggle');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const currentWidth = window.innerWidth;

        // åªåœ¨å¼€å‘ç¯å¢ƒæˆ–å®½åº¦å˜åŒ–è¾ƒå¤§æ—¶è¾“å‡ºæ—¥å¿—
        if ((window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') && Math.abs(currentWidth - (window.lastLoggedWidth || 0)) > 100) {
            console.log(`ğŸ” çª—å£å®½åº¦: ${currentWidth}px, å½“å‰æŠ˜å çŠ¶æ€: ${window.isAutoCollapsed}, æ™ºèƒ½æ¨¡å¼æ ‡è®°: ${window.wasInSmartMode}`);
            window.lastLoggedWidth = currentWidth;
        }

        if (currentWidth >= 1500) {
            // â‰¥1500pxï¼šå§‹ç»ˆæ˜¾ç¤ºä¾§è¾¹æ ï¼Œéšè—æŒ‰é’®
            window.isAutoCollapsed = false;
            if (sidebarDesktop) {
                sidebarDesktop.classList.remove('sidebar-hidden');
                sidebarDesktop.classList.add('sidebar-visible');
                // ç§»é™¤ä»»ä½•å†…è”æ ·å¼ï¼Œè®©CSSç±»ç”Ÿæ•ˆ
                sidebarDesktop.style.removeProperty('display');
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ–¥ï¸ å¤§å±æ¨¡å¼ï¼šä¾§è¾¹æ å§‹ç»ˆæ˜¾ç¤º');
                }
            }
            if (mobileToggle) {
                mobileToggle.style.display = 'none';
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸš« å¤§å±æ¨¡å¼ï¼šéšè—æŠ˜å æŒ‰é’®');
                }
            }
            if (sidebarOverlay) {
                sidebarOverlay.style.display = 'none';
            }
            // å¤§å±æ¨¡å¼ä¸‹ä¸éœ€è¦å…³é—­ä¾§è¾¹æ ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯æ¡Œé¢ç‰ˆä¾§è¾¹æ 
        } else if (currentWidth >= 1200) {
            // 1200-1500pxï¼šæ™ºèƒ½æŠ˜å æ¨¡å¼
            // é‡è¦ä¿®å¤ï¼šè¿›å…¥æ™ºèƒ½æ¨¡å¼æ—¶ï¼Œå¦‚æœä¹‹å‰ä¸æ˜¯æ™ºèƒ½æ¨¡å¼ï¼Œåˆ™é‡ç½®ä¸ºæŠ˜å çŠ¶æ€
            if (!window.wasInSmartMode) {
                window.isAutoCollapsed = true;
                window.wasInSmartMode = true;
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ§  è¿›å…¥æ™ºèƒ½æŠ˜å æ¨¡å¼ï¼Œé‡ç½®ä¸ºæŠ˜å çŠ¶æ€');
                }
            }

            if (window.isAutoCollapsed) {
                // æŠ˜å çŠ¶æ€ï¼šéšè—ä¾§è¾¹æ ï¼Œæ˜¾ç¤ºæŒ‰é’®
                sidebarDesktop.classList.remove('sidebar-visible');
                sidebarDesktop.classList.add('sidebar-hidden');
                sidebarDesktop.style.removeProperty('display');
                mobileToggle.style.display = 'flex';
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ”’ æ™ºèƒ½æ¨¡å¼ï¼šä¾§è¾¹æ å·²æŠ˜å ');
                }
            } else {
                // å±•å¼€çŠ¶æ€ï¼šæ˜¾ç¤ºä¾§è¾¹æ ï¼Œéšè—æŒ‰é’®
                sidebarDesktop.classList.remove('sidebar-hidden');
                sidebarDesktop.classList.add('sidebar-visible');
                // ç§»é™¤ä»»ä½•å†…è”æ ·å¼ï¼Œè®©CSSç±»ç”Ÿæ•ˆ
                sidebarDesktop.style.removeProperty('display');
                mobileToggle.style.display = 'none';
                console.log('ğŸ”“ æ™ºèƒ½æ¨¡å¼ï¼šä¾§è¾¹æ å·²å±•å¼€');
            }
            if (sidebarOverlay) {
                sidebarOverlay.style.display = 'none';
            }
            // åªåœ¨ç§»åŠ¨ç«¯ä¾§è¾¹æ æ‰“å¼€æ—¶æ‰å…³é—­
            if (!sidebarMobile.classList.contains('-translate-x-full')) {
                closeSidebar();
            }
        } else {
            // <1200pxï¼šç§»åŠ¨ç«¯æ¨¡å¼
            window.isAutoCollapsed = true;
            window.wasInSmartMode = false;
            if (sidebarDesktop) {
                // ä½¿ç”¨ä¸“ç”¨CSSç±»éšè—ï¼Œä¿æŒfixedå®šä½
                sidebarDesktop.classList.remove('sidebar-visible');
                sidebarDesktop.classList.add('sidebar-hidden');
                // ç§»é™¤ä»»ä½•å†…è”æ ·å¼ï¼Œè®©CSSç±»ç”Ÿæ•ˆ
                sidebarDesktop.style.removeProperty('display');
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ“± ç§»åŠ¨ç«¯æ¨¡å¼ï¼šéšè—æ¡Œé¢ä¾§è¾¹æ ');
                }
            }
            if (mobileToggle) {
                mobileToggle.style.display = 'flex';
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ“± ç§»åŠ¨ç«¯æ¨¡å¼ï¼šæ˜¾ç¤ºæ§åˆ¶æŒ‰é’®');
                }
            }
            if (sidebarOverlay) {
                sidebarOverlay.style.display = 'block';
                if (window.location.hostname === 'localhost') {
                    console.log('ğŸ“± ç§»åŠ¨ç«¯æ¨¡å¼ï¼šæ˜¾ç¤ºé®ç½©å±‚');
                }
            }
            // ç¡®ä¿ç§»åŠ¨ç«¯ä¾§è¾¹æ ä¹Ÿæ˜¯å…³é—­çŠ¶æ€
            closeSidebar();
        }

        // åœ¨å¤§å±æ¨¡å¼ä¸‹ï¼Œæ ‡è®°ä¸åœ¨æ™ºèƒ½æ¨¡å¼
        if (currentWidth >= 1500) {
            window.wasInSmartMode = false;
        }
    }

    // ä¼˜åŒ–çš„resizeäº‹ä»¶å¤„ç† - ç«‹å³å“åº” + é˜²æŠ–ä¼˜åŒ–
    let resizeTimer;
    let lastWidth = window.innerWidth;

    window.addEventListener('resize', function() {
        const currentWidth = window.innerWidth;

        // æ£€æŸ¥æ˜¯å¦è·¨è¶Šäº†å…³é”®æ–­ç‚¹
        const crossedBreakpoint =
            (lastWidth >= 1500 && currentWidth < 1500) ||
            (lastWidth < 1500 && currentWidth >= 1500) ||
            (lastWidth >= 1200 && currentWidth < 1200) ||
            (lastWidth < 1200 && currentWidth >= 1200);

        if (crossedBreakpoint) {
            // è·¨è¶Šæ–­ç‚¹æ—¶ç«‹å³å“åº”
            if (window.location.hostname === 'localhost') {
                console.log(`âš¡ è·¨è¶Šæ–­ç‚¹ï¼š${lastWidth}px â†’ ${currentWidth}pxï¼Œç«‹å³æ›´æ–°`);
            }
            clearTimeout(resizeTimer);
            updateSidebarDisplay();
            lastWidth = currentWidth;
        } else {
            // åŒä¸€åŒºé—´å†…çš„å˜åŒ–ä½¿ç”¨é˜²æŠ–ï¼Œå¢åŠ é˜²æŠ–æ—¶é—´
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                updateSidebarDisplay();
                lastWidth = window.innerWidth;
            }, 150); // å¢åŠ é˜²æŠ–æ—¶é—´ï¼Œå‡å°‘é¢‘ç¹è§¦å‘
        }
    });

    // çŠ¶æ€éªŒè¯å‡½æ•° - ä»…åœ¨å¿…è¦æ—¶éªŒè¯
    function validateSidebarState(force = false) {
        const currentWidth = window.innerWidth;
        const sidebarDesktop = document.getElementById('sidebar-desktop');
        const mobileToggle = document.getElementById('mobile-sidebar-toggle');

        if (!sidebarDesktop || !mobileToggle) return;

        const isVisible = window.getComputedStyle(sidebarDesktop).display !== 'none';
        const buttonVisible = window.getComputedStyle(mobileToggle).display !== 'none';

        // åªåœ¨å¼ºåˆ¶éªŒè¯æˆ–è°ƒè¯•æ¨¡å¼ä¸‹è¾“å‡ºæ—¥å¿—
        if (force || window.location.search.includes('debug=sidebar')) {
            console.log(`ğŸ”§ çŠ¶æ€éªŒè¯ - å®½åº¦:${currentWidth}px, ä¾§è¾¹æ å¯è§:${isVisible}, æŒ‰é’®å¯è§:${buttonVisible}, æŠ˜å çŠ¶æ€:${window.isAutoCollapsed}`);
        }

        // æ£€æŸ¥çŠ¶æ€æ˜¯å¦æ­£ç¡®
        let needsUpdate = false;

        if (currentWidth >= 1500) {
            // å¤§å±æ¨¡å¼ï¼šä¾§è¾¹æ åº”è¯¥æ˜¾ç¤ºï¼ŒæŒ‰é’®åº”è¯¥éšè—
            if (!isVisible || buttonVisible) needsUpdate = true;
        } else if (currentWidth >= 1200) {
            // æ™ºèƒ½æ¨¡å¼ï¼šæ ¹æ®æŠ˜å çŠ¶æ€
            if (window.isAutoCollapsed) {
                if (isVisible || !buttonVisible) needsUpdate = true;
            } else {
                if (!isVisible || buttonVisible) needsUpdate = true;
            }
        } else {
            // ç§»åŠ¨ç«¯ï¼šæ¡Œé¢ä¾§è¾¹æ åº”è¯¥éšè—ï¼ŒæŒ‰é’®åº”è¯¥æ˜¾ç¤º
            if (isVisible || !buttonVisible) needsUpdate = true;
        }

        if (needsUpdate) {
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('âš ï¸ æ£€æµ‹åˆ°çŠ¶æ€ä¸ä¸€è‡´ï¼Œå¼ºåˆ¶æ›´æ–°');
            }
            updateSidebarDisplay();
        }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    updateSidebarDisplay();

    // ä¼˜åŒ–ï¼šåªåœ¨é¡µé¢å¯è§æ€§å˜åŒ–æ—¶éªŒè¯çŠ¶æ€ï¼ˆä¾‹å¦‚ä»å…¶ä»–æ ‡ç­¾é¡µåˆ‡å›æ¥ï¼‰
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            // é¡µé¢é‡æ–°å¯è§æ—¶éªŒè¯ä¸€æ¬¡çŠ¶æ€
            setTimeout(() => validateSidebarState(true), 100);
        }
    });

    // ä¼˜åŒ–ï¼šåœ¨çª—å£è·å¾—ç„¦ç‚¹æ—¶éªŒè¯ä¸€æ¬¡çŠ¶æ€
    window.addEventListener('focus', function() {
        setTimeout(() => validateSidebarState(true), 100);
    });
});
</script>
