/**
 * Animation Utilities
 * 动画工具类 - 统一的动画效果
 */

/* 基础动画变量 - 加快主题切换速度 */
:root {
  --animation-duration-fast: 0.1s;
  --animation-duration-normal: 0.15s;
  --animation-duration-slow: 0.25s;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
  --animation-easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --theme-transition-duration: 0.03s; /* 调整为30ms，让主题切换更快速 */
}

/* 淡入动画 */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn var(--animation-duration-normal) var(--animation-easing);
}

/* 淡出动画 */
@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.fade-out {
  animation: fadeOut var(--animation-duration-normal) var(--animation-easing);
}

/* 滑入动画 */
@keyframes slideInUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in-up {
  animation: slideInUp var(--animation-duration-normal) var(--animation-easing);
}

@keyframes slideInDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in-down {
  animation: slideInDown var(--animation-duration-normal) var(--animation-easing);
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.slide-in-left {
  animation: slideInLeft var(--animation-duration-normal) var(--animation-easing);
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.slide-in-right {
  animation: slideInRight var(--animation-duration-normal) var(--animation-easing);
}

/* 缩放动画 */
@keyframes scaleIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.scale-in {
  animation: scaleIn var(--animation-duration-normal) var(--animation-easing);
}

@keyframes scaleOut {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.8);
    opacity: 0;
  }
}

.scale-out {
  animation: scaleOut var(--animation-duration-normal) var(--animation-easing);
}

/* 弹跳动画 */
@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -30px, 0);
  }
  70% {
    transform: translate3d(0, -15px, 0);
  }
  90% {
    transform: translate3d(0, -4px, 0);
  }
}

.bounce {
  animation: bounce 1s var(--animation-easing);
}

/* 摇摆动画 */
@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-10px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(10px);
  }
}

.shake {
  animation: shake 0.6s var(--animation-easing);
}

/* 脉冲动画 */
@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

.pulse {
  animation: pulse 2s infinite;
}

/* 旋转动画 */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.spin {
  animation: spin 1s linear infinite;
}

/* 加载动画 */
@keyframes loading {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.loading-spinner {
  width: 1rem;
  height: 1rem;
  border: 2px solid var(--line-divider);
  border-top: 2px solid var(--primary);
  border-radius: 50%;
  animation: loading 1s linear infinite;
}

/* 页面加载动画 - 性能优化版本 */
.onload-animation {
  opacity: 0;
  transform: translate3d(0, 20px, 0); /* 使用 translate3d 启用硬件加速 */
  animation: onloadFadeInUp var(--animation-duration-slow) var(--animation-easing) forwards;
  will-change: opacity, transform; /* 提示浏览器优化这些属性 */
}

@keyframes onloadFadeInUp {
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0); /* 使用 translate3d 保持硬件加速 */
  }
}

/* 在动画完成后移除 will-change */
.onload-animation.animation-complete {
  will-change: auto;
}

/* 延迟动画 */
.animation-delay-100 {
  animation-delay: 0.1s;
}

.animation-delay-200 {
  animation-delay: 0.2s;
}

.animation-delay-300 {
  animation-delay: 0.3s;
}

.animation-delay-500 {
  animation-delay: 0.5s;
}

.animation-delay-700 {
  animation-delay: 0.7s;
}

.animation-delay-1000 {
  animation-delay: 1s;
}

/* 悬停动画 */
.hover-lift {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

.hover-lift:hover {
  transform: translateY(-4px);
}

.hover-scale {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

.hover-scale:hover {
  transform: scale(1.05);
}

.hover-rotate {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

.hover-rotate:hover {
  transform: rotate(5deg);
}

/* 点击动画 */
.active-scale {
  transition: transform var(--animation-duration-fast) var(--animation-easing);
}

.active-scale:active {
  transform: scale(0.95);
}

/* 渐变动画 */
@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.gradient-animation {
  background-size: 200% 200%;
  animation: gradientShift 3s ease infinite;
}

/* 打字机效果 */
@keyframes typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid var(--primary);
  white-space: nowrap;
  animation: typewriter 3s steps(40, end), blink-caret 0.75s step-end infinite;
}

@keyframes blink-caret {
  from, to {
    border-color: transparent;
  }
  50% {
    border-color: var(--primary);
  }
}

/* 滚动动画 */
.scroll-reveal {
  opacity: 0;
  transform: translateY(50px);
  transition: all 0.6s var(--animation-easing);
}

.scroll-reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* 无限动画 */
.infinite {
  animation-iteration-count: infinite;
}

/* 动画暂停 */
.paused {
  animation-play-state: paused;
}

/* 动画速度 */
.animation-fast {
  animation-duration: var(--animation-duration-fast);
}

.animation-normal {
  animation-duration: var(--animation-duration-normal);
}

.animation-slow {
  animation-duration: var(--animation-duration-slow);
}

/* 过渡效果 - 加快速度 */
.transition-all {
  transition: all var(--animation-duration-fast) var(--animation-easing);
}

.transition-colors {
  transition: color var(--animation-duration-fast) var(--animation-easing),
              background-color var(--animation-duration-fast) var(--animation-easing),
              border-color var(--animation-duration-fast) var(--animation-easing);
}

.transition-transform {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

.transition-opacity {
  transition: opacity var(--animation-duration-fast) var(--animation-easing);
}

/* 主题切换动画 - 优化性能 */
.theme-transitioning {
  /* 只为根元素添加过渡，减少重绘 */
  transition: background-color var(--theme-transition-duration) var(--animation-easing),
              color var(--theme-transition-duration) var(--animation-easing);
}

/* 为关键元素添加过渡 */
.theme-transitioning .bg-white,
.theme-transitioning .bg-gray-50,
.theme-transitioning .bg-gray-100,
.theme-transitioning .bg-gray-900,
.theme-transitioning .dark\\:bg-gray-900,
.theme-transitioning .dark\\:bg-gray-800,
.theme-transitioning .backdrop-blur-md,
.theme-transitioning .border-gray-200,
.theme-transitioning .dark\\:border-gray-700,
.theme-transitioning .text-gray-900,
.theme-transitioning .dark\\:text-white,
.theme-transitioning .text-gray-600,
.theme-transitioning .dark\\:text-gray-300 {
  transition: background-color var(--theme-transition-duration) var(--animation-easing),
              color var(--theme-transition-duration) var(--animation-easing),
              border-color var(--theme-transition-duration) var(--animation-easing) !important;
}

/* 为导航栏和卡片添加特殊过渡 */
.theme-transitioning .navbar,
.theme-transitioning .card-base,
.theme-transitioning .btn-plain {
  transition: background-color var(--theme-transition-duration) var(--animation-easing),
              color var(--theme-transition-duration) var(--animation-easing),
              border-color var(--theme-transition-duration) var(--animation-easing),
              box-shadow var(--theme-transition-duration) var(--animation-easing) !important;
}

/* 优化主题切换按钮的动画 - 更快响应 */
#scheme-switch {
  transition: transform 0.05s var(--animation-easing);
}

#scheme-switch:active {
  transform: scale(0.95);
}

/* 主题切换按钮图标过渡 */
#scheme-switch .absolute {
  transition: opacity var(--theme-transition-duration) var(--animation-easing);
}

/* 减少动画（用户偏好） */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .onload-animation {
    opacity: 1;
    transform: none;
    animation: none;
  }

  /* 用户偏好减少动画时，禁用主题切换动画 */
  .theme-transitioning,
  .theme-transitioning *,
  .theme-transitioning *::before,
  .theme-transitioning *::after {
    transition: none !important;
  }
}
