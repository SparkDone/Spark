/**
 * 布局切换按钮组件样式
 * 专门设计来避免outline问题
 */

/* 容器样式 */
.layout-switcher {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem;
  background: var(--btn-content-bg);
  border-radius: 0.5rem;
  /* 移除边框 */
}

/* 按钮基础样式 - 完全重置所有默认样式 */
.layout-switch-btn {
  /* 重置所有默认样式 */
  all: unset;
  
  /* 基础布局 */
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  border-radius: 0.375rem;
  cursor: pointer;
  
  /* 颜色和背景 */
  color: #6b7280;  /* 亮色模式下的暗色调 (gray-500) */
  background: transparent;
  
  /* 过渡效果 */
  transition: all 0.2s ease;
  
  /* 强制移除所有outline相关样式 */
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
  
  /* 移除浏览器默认样式 */
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
  -webkit-tap-highlight-color: transparent !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* 图标样式 */
.layout-switch-btn .layout-icon {
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;
}

/* 悬停状态 */
.layout-switch-btn:hover {
  color: var(--primary);
  background: var(--btn-plain-bg-hover);
  transform: scale(1.05);

  /* 确保悬停时也没有outline */
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
}

/* 激活状态 */
.layout-switch-btn:active,
.layout-switch-btn.active,
.layout-switch-btn[data-active="true"] {
  color: var(--primary);
  background: var(--btn-plain-bg-active);
  transform: scale(0.95);

  /* 确保激活时也没有outline */
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
}

/* 点击时的视觉反馈 */
.layout-switch-btn:active {
  transform: scale(0.9);
  transition: transform 0.1s ease;
}

/* 焦点状态 - 完全移除所有焦点样式 */
.layout-switch-btn:focus,
.layout-switch-btn:focus-visible,
.layout-switch-btn:focus-within {
  /* 强制移除所有outline */
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
  
  /* 提供替代的视觉反馈 */
  background: var(--btn-plain-bg-hover);
  color: var(--primary);
}

/* 禁用状态 */
.layout-switch-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  
  /* 确保禁用时也没有outline */
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
}

/* 响应式设计 */
@media (max-width: 640px) {
  .layout-switcher {
    gap: 0.125rem;
    padding: 0.125rem;
  }
  
  .layout-switch-btn {
    width: 1.75rem;
    height: 1.75rem;
  }
  
  .layout-switch-btn .layout-icon {
    width: 0.875rem;
    height: 0.875rem;
  }
}

/* 默认样式（假设为亮色模式） */
.layout-switch-btn {
  color: #6b7280 !important;  /* 默认为暗色调 */
}

.layout-switch-btn:hover {
  color: var(--primary) !important;
}

.layout-switch-btn:active,
.layout-switch-btn.active,
.layout-switch-btn[data-active="true"] {
  color: var(--primary) !important;
}

/* 亮色模式明确样式 */
:root[data-theme="light"] .layout-switch-btn,
.light .layout-switch-btn,
[data-theme="light"] .layout-switch-btn {
  color: #6b7280;  /* 亮色模式下未选中按钮为暗色调 (gray-500) */
}

:root[data-theme="light"] .layout-switch-btn:hover,
.light .layout-switch-btn:hover,
[data-theme="light"] .layout-switch-btn:hover {
  color: var(--primary);
  background: var(--btn-plain-bg-hover);
}

:root[data-theme="light"] .layout-switch-btn:active,
:root[data-theme="light"] .layout-switch-btn.active,
:root[data-theme="light"] .layout-switch-btn[data-active="true"],
.light .layout-switch-btn:active,
.light .layout-switch-btn.active,
.light .layout-switch-btn[data-active="true"],
[data-theme="light"] .layout-switch-btn:active,
[data-theme="light"] .layout-switch-btn.active,
[data-theme="light"] .layout-switch-btn[data-active="true"] {
  color: var(--primary);
  background: var(--btn-plain-bg-active);
}

/* 暗色模式适配 - 使用CSS类而不是媒体查询 */
:root[data-theme="dark"] .layout-switcher,
.dark .layout-switcher,
[data-theme="dark"] .layout-switcher {
  background: var(--btn-content-bg);
}

:root[data-theme="dark"] .layout-switch-btn,
.dark .layout-switch-btn,
[data-theme="dark"] .layout-switch-btn {
  color: white;  /* 暗黑模式下未选中按钮为白色 */
  background: transparent;
}

:root[data-theme="dark"] .layout-switch-btn:hover,
.dark .layout-switch-btn:hover,
[data-theme="dark"] .layout-switch-btn:hover {
  color: var(--primary);
  background: var(--btn-plain-bg-hover);
}

:root[data-theme="dark"] .layout-switch-btn:active,
:root[data-theme="dark"] .layout-switch-btn.active,
:root[data-theme="dark"] .layout-switch-btn[data-active="true"],
.dark .layout-switch-btn:active,
.dark .layout-switch-btn.active,
.dark .layout-switch-btn[data-active="true"],
[data-theme="dark"] .layout-switch-btn:active,
[data-theme="dark"] .layout-switch-btn.active,
[data-theme="dark"] .layout-switch-btn[data-active="true"] {
  color: var(--primary);
  background: var(--btn-plain-bg-active);
}

:root[data-theme="dark"] .layout-switch-btn:focus,
:root[data-theme="dark"] .layout-switch-btn:focus-visible,
.dark .layout-switch-btn:focus,
.dark .layout-switch-btn:focus-visible,
[data-theme="dark"] .layout-switch-btn:focus,
[data-theme="dark"] .layout-switch-btn:focus-visible {
  color: var(--primary);
  background: var(--btn-plain-bg-hover);
}

/* 兼容媒体查询方式的亮色模式 */
@media (prefers-color-scheme: light) {
  .layout-switch-btn {
    color: #6b7280;  /* 亮色模式下未选中按钮为暗色调 (gray-500) */
  }

  .layout-switch-btn:hover,
  .layout-switch-btn:focus,
  .layout-switch-btn:focus-visible {
    color: var(--primary);
    background: var(--btn-plain-bg-hover);
  }

  .layout-switch-btn:active,
  .layout-switch-btn.active,
  .layout-switch-btn[data-active="true"] {
    color: var(--primary);
    background: var(--btn-plain-bg-active);
  }
}

/* 兼容媒体查询方式的暗色模式 */
@media (prefers-color-scheme: dark) {
  .layout-switcher {
    background: var(--btn-content-bg);
  }

  .layout-switch-btn {
    color: white;  /* 暗黑模式下未选中按钮为白色 */
  }

  .layout-switch-btn:hover,
  .layout-switch-btn:focus,
  .layout-switch-btn:focus-visible {
    color: var(--primary);
    background: var(--btn-plain-bg-hover);
  }

  .layout-switch-btn:active,
  .layout-switch-btn.active,
  .layout-switch-btn[data-active="true"] {
    color: var(--primary);
    background: var(--btn-plain-bg-active);
  }
}

/* 确保在所有可能的选择器下都没有outline */
button.layout-switch-btn,
.layout-switcher button,
.layout-switcher .layout-switch-btn,
div.layout-switcher button.layout-switch-btn {
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
}

button.layout-switch-btn:focus,
button.layout-switch-btn:focus-visible,
button.layout-switch-btn:active,
button.layout-switch-btn:hover,
.layout-switcher button:focus,
.layout-switcher button:focus-visible,
.layout-switcher button:active,
.layout-switcher button:hover,
.layout-switcher .layout-switch-btn:focus,
.layout-switcher .layout-switch-btn:focus-visible,
.layout-switcher .layout-switch-btn:active,
.layout-switcher .layout-switch-btn:hover,
div.layout-switcher button.layout-switch-btn:focus,
div.layout-switcher button.layout-switch-btn:focus-visible,
div.layout-switcher button.layout-switch-btn:active,
div.layout-switcher button.layout-switch-btn:hover {
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
}
