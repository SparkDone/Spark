---
/**
 * 测试页面 - 检查Strapi页面API
 */

import { getAllPages } from "../lib/strapi-pages";

const pages = await getAllPages();
---

<html>
<head>
    <title>测试Strapi页面</title>
</head>
<body>
    <h1>Strapi页面测试</h1>
    
    <h2>获取到的页面数量: {pages.length}</h2>
    
    {pages.length > 0 ? (
        <div>
            <h3>页面列表:</h3>
            <ul>
                {pages.map(page => (
                    <li>
                        <strong>标题:</strong> {page.title}<br/>
                        <strong>Slug:</strong> {page.slug}<br/>
                        <strong>Meta标题:</strong> {page.metaTitle || '无'}<br/>
                        <strong>访问链接:</strong> <a href={`/page/${page.slug}`}>/page/{page.slug}</a><br/>
                        <strong>是否激活:</strong> {page.isActive ? '是' : '否'}<br/>
                        <hr/>
                    </li>
                ))}
            </ul>
        </div>
    ) : (
        <div>
            <p>❌ 没有获取到任何页面</p>
            <p>可能的原因：</p>
            <ul>
                <li>Strapi中没有创建"pages"内容类型</li>
                <li>页面没有发布</li>
                <li>API Token权限不足</li>
                <li>API连接失败</li>
            </ul>
        </div>
    )}
    
    <h3>调试信息:</h3>
    <pre>{JSON.stringify(pages, null, 2)}</pre>
</body>
</html>
